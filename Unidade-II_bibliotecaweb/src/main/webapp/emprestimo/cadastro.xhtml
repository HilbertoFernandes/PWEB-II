<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<f:metadata>
	<f:event type="preRenderView"
		     listener="#{usuarioBean.listarUsuariosAtivos}" />
	<f:event type="preRenderView"
		     listener="#{livroBean.listarLivrosDisponiveis}" />
</f:metadata>
<h:body>
	<ui:composition template="../template/template.xhtml">
		 <ui:define name="ttitle">Cadastro de novo Empréstimo</ui:define>
		 <ui:define name="tbody">
			<h:form>
				<p:tabView>
					<p:tab title="Novo Empréstimo">
					
						<h:panelGrid columns="5" 
						             style="width:90%">

							   <h:outputLabel 
							                  value="Selecione o usuário ">
							   </h:outputLabel>
							 <h:selectOneMenu id="usuario"
							                  value="#{emprestimoBean.usuario}"
									          required="true" 
								              requiredMessage="Usuário é obrigatório"
								              styleClass="form-control">
								 <f:converter 
								              converterId="usuarioConverter">
								 </f:converter>
								 
								<f:selectItem noSelectionOption="true" 
								              itemLabel="Selecione..."
									          itemValue="#{null}">
							    </f:selectItem>
							   <f:selectItems value="#{usuarioBean.usuarios}" 
								              var="usuario"
									          itemLabel="#{usuario.nome}" 
									          itemValue="#{usuario}">
							   </f:selectItems>
							</h:selectOneMenu>

							<h:outputLabel value="Selecione o livro " ></h:outputLabel>
							 <h:selectOneMenu id="livro" 
							                  value="#{emprestimoBean.livro}"
								              required="true" 
								              requiredMessage="Livro é obrigatório"
								              styleClass="form-control">
								 <f:converter 
								             converterId="livroConverter">
								 </f:converter>
								 
								<f:selectItem noSelectionOption="true"
								              itemLabel="Selecione..."
									          itemValue="#{null}">
							    </f:selectItem>
							    
								<f:selectItems value="#{livroBean.livros}" 
								               var="livro"
									           itemLabel="#{livro.titulo}" 
									           itemValue="#{livro}">
							    </f:selectItems>
							</h:selectOneMenu>

							<h:panelGrid columns="2">
							   <h:commandLink value="" 
							                  action="#{emprestimoBean.salvar}"
							                  id="bt_salvar">
								           <i class="glyphicon glyphicon-floppy-saved" 
								              style="font-size:2em;
								              padding: 20px;
								              color:green">
								          </i> 
                            </h:commandLink>	
							</h:panelGrid>
								<h:messages errorStyle="color:red" 
								            infoStyle="color:blue"
					                        layout="table" />
						</h:panelGrid>
					</p:tab>
				</p:tabView>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>







